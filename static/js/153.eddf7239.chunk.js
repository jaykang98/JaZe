"use strict";(self.webpackChunkjaze=self.webpackChunkjaze||[]).push([[153],{5153:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(5043),s=a(2866);const n="OptionList_optionList__OcD1m";var i=a(579);const o=e=>{let{dataType:t,options:a,id:o}=e;const[c,l]=(0,r.useState)(a),d=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=()=>{if(d.current){const e=d.current.offsetWidth;let t=0,r=0;a.forEach(((a,s)=>{t+100<=e&&(t+=100,r++)})),l(a.slice(0,r))}};e();const t=new ResizeObserver(e);return d.current&&t.observe(d.current),()=>{t.disconnect()}}),[a]),Array.isArray(a)?a.length?(0,i.jsx)("div",{ref:d,className:n,id:o,children:c.map(((e,t)=>(0,i.jsx)(s.A,{onClick:t=>{const a=t.currentTarget.closest(".TimeSelectionRow, .CriteriaSelectionRow");if(a){const t=a.querySelector("input");t&&(t.value=e.value)}},children:e.key},t)))}):null:(console.error('OptionList component expects "options" prop to be an array.'),null)},c="Input_inputContainer__xegc6",l="Input_inputField__ZcXS5",d=e=>{let{id:t,type:a,name:r,value:s,placeholder:n,onChange:o}=e;return(0,i.jsx)("div",{className:c,children:(0,i.jsx)("input",{id:t,type:a,name:r,value:s,placeholder:n,className:l,onChange:o})})},u="TimeSelectionRow_TimeSelectionRow__++9rd",m=e=>{let{timestamp:t,label:a}=e;const r=(new Date).getFullYear(),s={dataType:"year",options:Array.from({length:4},((e,t)=>({key:"".concat(r-t),dataType:"year",value:"".concat(r-t)})))};return(0,i.jsxs)("div",{className:u,children:[(0,i.jsx)("span",{children:a}),(0,i.jsx)(d,{id:"datetime-local-input",type:"datetime-local",name:"timestamp",value:t,placeholder:"Select Date and Time"}),(0,i.jsx)(o,{...s})]})};var p=a(6125);const h="CriteriaSelectionRow_criteriaSelectionRow__vVmzl",v=e=>{let{selectionType:t,setSelectionType:a,formData:s,setFormData:n,albumData:c,artistData:l,trackData:u}=e;const[m,p]=(0,r.useState)([]);(0,r.useEffect)((()=>{let e=[];switch(t){case"album":e=(null===c||void 0===c?void 0:c.topalbums.album.map((e=>({value:e.url,key:"".concat(e.artist.name," - ").concat(e.name),dataType:"album"}))))||[];break;case"artist":e=(null===l||void 0===l?void 0:l.topartists.artist.map((e=>({value:e.url,key:e.name,dataType:"artist"}))))||[];break;case"track":e=(null===u||void 0===u?void 0:u.toptracks.track.map((e=>({value:e.url,key:"".concat(e.artist.name," - ").concat(e.name),dataType:"track"}))))||[]}p(e)}),[c,l,u,t]);const v=(0,i.jsx)("select",{value:t,onChange:e=>{const t=e.target.value;a(t)},children:["artist","album","track"].map((e=>(0,i.jsx)("option",{value:e,title:"Criteria",children:e.charAt(0).toUpperCase()+e.slice(1)},e)))});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:h,children:[v,(0,i.jsx)(d,{id:"selectionInput",type:"text",name:t,value:s[t]||"",onChange:e=>{const{name:t,value:a}=e.target;n((e=>({...e,[t]:a})))},placeholder:"Enter ".concat(t)}),(0,i.jsx)(o,{options:m,dataType:t})]})})},y=e=>{let{formData:t,setFormData:a,userID:n}=e;const{albumData:o,artistData:c,trackData:l}=(0,p.S)(n),[d,u]=(0,r.useState)("artist");return(0,i.jsx)("form",{onSubmit:e=>e.preventDefault(),id:"GenerateVisForm",children:(0,i.jsxs)("div",{className:"misc",children:[(0,i.jsx)(v,{selectionType:d,setSelectionType:u,formData:t,setFormData:a,albumData:o,artistData:c,trackData:l}),(0,i.jsx)(m,{timestamp:t.startTimestamp,label:"Start Time"}),(0,i.jsx)(m,{timestamp:t.endTimestamp,label:"End Time"}),(0,i.jsx)(s.A,{type:"submit",children:"Submit"})]})})};var x=a(4440),j=a(1733);const g=e=>{let{userID:t}=e;const[a,s]=(0,r.useState)({selectionType:"track"}),n=(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"JaZe: Does Things"}),(0,i.jsx)("p",{className:j.A.description,children:"This application helps you manage your music data effectively. Explore various functionalities provided to enhance your experience."})]}),o=(0,i.jsx)(y,{formData:a,setFormData:e=>s(e),selectionType:a.selectionType,userID:t}),c=n;return(0,i.jsx)(x.A,{title:"Main",userID:t,primaryContent:c,secondaryContent:o,primaryWidth:100,secondaryWidth:100})}},2866:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(5043);const s={button:"Button_button__P50I1",gradientLoop:"Button_gradientLoop__arAFQ"};var n=a(579);const i=(0,r.forwardRef)(((e,t)=>{let{onClick:a,children:r,type:i="button",className:o,label:c,disabled:l=!1}=e;return(0,n.jsx)("button",{ref:t,type:i,className:"".concat(s.button," ").concat(o||""," ").concat(l?s.disabled:""),onClick:a,disabled:l,children:r})}))},4440:(e,t,a)=>{a.d(t,{A:()=>D});var r=a(5043);const s={titleBar:"ActivityTitleBar_titleBar__C4F1B"},n="LoginCard_LoginCardContainer__UgDVy",i="LoginCard_LoginCard__nOMBm",o="LoginCard_userHeader__EGsyM",c="LoginCard_userImage__02251",l="LoginCard_userInfo__9N6Ro",d="LoginCard_SubText__xaWPu",u="LoginCard_LoginCardOverlay__r2UUw",m="LoginCard_logoutButton__db-YT";var p=a(6125),h=a(1969),v=a(579);const y=e=>{var t,a,s;let{userID:y}=e;const{userData:x,loading:j}=(0,p.S)(y),{logOut:g}=(0,h.p)(),_=null===x||void 0===x||null===(t=x.user)||void 0===t||null===(a=t.image)||void 0===a?void 0:a[0]["#text"],[f,D]=(0,r.useState)(!1);return j?(0,v.jsx)("div",{className:l,children:"Loading..."}):(0,v.jsxs)("div",{className:n,onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),children:[(0,v.jsx)("div",{className:u}),y?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:i,children:[_&&(0,v.jsx)("img",{src:_,alt:"User",className:c}),(0,v.jsxs)("div",{className:l,children:[(0,v.jsx)("span",{className:o,children:y}),(0,v.jsx)("br",{}),(0,v.jsx)("span",{children:null===x||void 0===x||null===(s=x.user)||void 0===s?void 0:s.realname}),(0,v.jsx)("br",{}),(0,v.jsx)("span",{className:d,children:"Logged In!"})]})]}),f&&(0,v.jsx)("div",{className:m,onClick:()=>{g()},children:"Log Out"})]}):(0,v.jsx)("div",{className:i,children:(0,v.jsx)("span",{children:"Nobody Logged in!"})})]})},x=e=>{let{title:t,userID:a}=e;return(0,v.jsxs)("div",{className:s.titleBar,children:[(0,v.jsx)("div",{children:(0,v.jsx)("h2",{children:t})}),(0,v.jsx)("div",{className:s.loginCardContainer,children:(0,v.jsx)(y,{userID:a})})]})},j="ViewFrame_viewFrame__x+2Zi",g="ViewSection_viewSection__j9IFc",_=e=>{let{children:t,style:a}=e;return(0,v.jsx)("div",{className:g,style:a,children:t})},f=e=>{let{children:t,splitPercentage:a=50}=e;const s=(0,r.useRef)(null),[n,i]=(0,r.useState)(a),o=r.Children.toArray(t).slice(0,2);return(0,r.useEffect)((()=>{const e=()=>{if(s.current){const e=s.current.offsetWidth,t=100,r=1800;let n=a;e*(a/100)<t?n=t/e*100:e*(a/100)>r&&(n=r/e*100),i(n)}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[a]),(0,v.jsxs)("div",{ref:s,className:j,children:[(0,v.jsx)(_,{style:{width:"".concat(n,"%")},children:o[0]}),(0,v.jsx)(_,{style:{width:"".concat(100-n,"%")},children:o[1]})]})},D=e=>{let{userID:t,primaryContent:a,primaryContentAnc:r,secondaryContent:s,secondaryContentAnc:n,title:i,primaryWidth:o=50,secondaryWidth:c=50}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(x,{userID:t,title:i}),(0,v.jsxs)("section",{children:[(0,v.jsxs)(f,{splitPercentage:o,children:[a,r]}),(0,v.jsxs)(f,{splitPercentage:c,children:[s,n]})]})]})}},6125:(e,t,a)=>{a.d(t,{S:()=>n});var r=a(5043);const s=async(e,t)=>{try{const a=await async function(e,t){const a=new URLSearchParams({...t,api_key:"053905e1fc8b0de378dc341a24ec68c7",format:"json"}).toString(),r="".concat("http://ws.audioscrobbler.com/2.0/","?method=").concat(e,"&").concat(a);try{const e=await fetch(r);if(!e.ok)throw new Error("Network response was not ok: ".concat(e.statusText));return await e.json()}catch(s){throw console.error("Failed to fetch data:",s),s}}(e,t);return a}catch(a){throw console.error("Error fetching and processing data:",a),a}},n=e=>{const[t,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[l,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,h]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{if(!e)return void h(!1);const t="userData_".concat(e),r=localStorage.getItem(t);if(r){const{userData:e,albumData:t,artistData:s,trackData:n}=JSON.parse(r);a(e),i(t),c(s),d(n),h(!1)}else{const r=async()=>{h(!0);try{const r=s("user.getinfo",{user:e}),n=s("user.getTopAlbums",{user:e,limit:5}),o=s("user.getTopArtists",{user:e,limit:5}),l=s("user.getTopTracks",{user:e,limit:5}),[u,m,p,h]=await Promise.all([r,n,o,l]);a(u),i(m),c(p),d(h),localStorage.setItem(t,JSON.stringify({userData:u,albumData:m,artistData:p,trackData:h}))}catch(u){console.error("Failed to fetch user data",u),m("Failed to fetch user data")}finally{h(!1)}};r()}}),[e]),{userData:t,albumData:n,artistData:o,trackData:l,error:u,loading:p}}}}]);
//# sourceMappingURL=153.eddf7239.chunk.js.map